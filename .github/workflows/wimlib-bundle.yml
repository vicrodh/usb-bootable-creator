# Example: wimlib binary bundling for AppImage
# This file shows how to integrate wimlib bundling into the main workflow

# Add this step after "Install system dependencies" in the main workflow:

#      - name: Bundle wimlib binaries for AppImage
#        run: |
#          mkdir -p dist/wimlib
#          # Copy wimlib-imagex binary from system
#          cp $(which wimlib-imagex) dist/wimlib/ || echo "wimlib-imagex not found"
#          # Copy any additional required libraries
#          ldd $(which wimlib-imagex) | grep "=>" | awk '{print $3}' | xargs -I{} cp -v {} dist/wimlib/ 2>/dev/null || true
#
#          # Create wimlib license bundle
#          cat > dist/wimlib/LICENSE << 'EOF'
#          wimlib - Windows Imaging library
#
#          License: GNU Lesser General Public License v3.0 (LGPL-3.0)
#
#          This software is distributed under the terms of the GNU Lesser General
#          Public License, version 3.0. A copy of this license can be found at:
#          https://www.gnu.org/licenses/lgpl-3.0.txt
#
#          Source code: https://wimlib.net/
#          GitHub: https://github.com/e2protocol/wimlib
#
#          Copyright (C) 2012-2023 Eric Biggers
#          EOF

# Add this step in the AppImage section (around line 79):

#          if [ -f "dist/wimlib/wimlib-imagex" ]; then
#            cp dist/wimlib/wimlib-imagex "$APPDIR"/usr/bin/
#            chmod +x "$APPDIR"/usr/bin/wimlib-imagex
#            # Copy libraries if needed
#            cp dist/wimlib/*.so* "$APPDIR"/usr/lib/ 2>/dev/null || true
#            # Copy license
#            cp dist/wimlib/LICENSE "$APPDIR"/usr/share/licenses/wimlib/
#          fi